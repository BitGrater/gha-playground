name: Command Dispatch

on:
  issue_comment:
    types:
      - created

jobs:
  dispatch_merge_checks:
    name: Merge Checks Requested
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
      actions: write
    steps:

      - name: SHA
        run: $GITHUB_SHA

      - name: Dispatch
        uses: peter-evans/slash-command-dispatch@v3
        with:
          commands: merge
          permission: none
          issue-type: pull-request
          dispatch-type: workflow
          event-type-suffix: "_command"
          token: ${{ secrets.GITHUB_TOKEN }}
          static-args: |
            pull-request-id=${{ github.event.issue.id }}